/**
 * id: PTXm
 * path: ./browser-fullscreen
 */

(function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(l,u){function i(e){try{c(r.next(e))}catch(n){u(n)}}function o(e){try{c(r.throw(e))}catch(n){u(n)}}function c(e){var n;e.done?l(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(i,o)}c((r=r.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,r,l,u,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(u){return function(o){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&u[0]?r.return:u[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,u[1])).done)return l;switch(r=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){i.label=u[1];break}if(6===u[0]&&i.label<l[1]){i.label=l[1],l=u;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(u);break}l[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(o){u=[6,o],r=0}finally{t=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@bilibili-live/web-player-common");function r(t){return e(this,void 0,Promise,function(){var e;return n(this,function(n){switch(n.label){case 0:return e=o(),t.contains(e)?[4,i()]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,u(t)];case 3:n.sent(),n.label=4;case 4:return[2]}})})}function l(e){for(var n=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],t=0,r=n;t<r.length;t++){var l=r[t];document.addEventListener(l,e)}return function(){for(var t=0,r=n;t<r.length;t++){var l=r[t];document.removeEventListener(l,e)}}}function u(r){return e(this,void 0,Promise,function(){var e,l,u,i;return n(this,function(n){for(e=0,l=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];e<l.length;e++)if("function"==typeof r[u=l[e]])return[2,r[u]()];if(t.ua.isIOS()&&"function"==typeof(null==(i=r.querySelector("video"))?void 0:i.webkitEnterFullScreen))return i.webkitEnterFullScreen(),[2];throw new Error("browser unsupported fullscreen")})})}function i(){return e(this,void 0,Promise,function(){var e,r,l,u;return n(this,function(n){if(null==(e=o()))return[2];for(r=0,l=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"];r<l.length;r++)if(u=l[r],"function"==typeof document[u])return[2,document[u]()];return t.ua.isIOS()&&!0===e.webkitDisplayingFullscreen&&e.webkitExitFullScreen(),[2]})})}function o(){for(var e=0,n=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];e<n.length;e++){if(null!=(u=document[n[e]]))return u}if(t.ua.isIOS())for(var r=0,l=document.querySelectorAll("video");r<l.length;r++){var u;if(!0===(u=l[r]).webkitDisplayingFullscreen)return u}return null}exports.default={onChange:l,toggleFullScreen:r,getFullscreenElement:o,requestFullscreen:u,exitFullscreen:i};
})()